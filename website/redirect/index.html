<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Redirecting...</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../supabase.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@200..1000&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
      integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="./../style.css" />
    <style type="text/tailwindcss">
      @theme {
        --color-background: var(--background);
        --color-surface: var(--surface);
        --color-primary: var(--primary);
        --color-primary-hover: var(--primary-hover);
        --color-text: var(--text);
        --color-text-secondary: var(--text-secondary);
      }
    </style>
  </head>
  <body class="bg-background min-h-dvh flex justify-center items-center">
    <h1 class="text-primary text-2xl">يرجى الانتظار ريثما يتم تحويلك</h1>
    <script async>
      (async () => {
        const {
          data: {
            user: { id },
          },
          error,
        } = await supabase.auth.getUser();
        const {
          data: { role },
          error1,
        } = await supabase
          .from("profiles")
          .select("role")
          .eq("id", id)
          .single();

        if (role === "admin") {
          window.location.href ="https://admin.modev.local"
          return;
        }
        if (role === "user") {
          window.location.href ="https://app.modev.local"
          return;
        }
      })();
    </script>
  </body>
</html>
